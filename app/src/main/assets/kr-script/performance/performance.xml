<?xml version="1.0" encoding="UTF-8" ?>
<items>
    <resource dir="file:///android_asset/kr-script/performance" />
    <resource dir="file:///android_asset/kr-script/qualcomm" />

    <group title="Intelligent Scheduling" visible="getprop persist.vtools.ext_all">
        <switch confirm="true" visible=". ./kr-script/qualcomm/msm_booster_support.sh">
            <title>Performance Boost Config</title>
            <desc>The system increases the CPU frequency for a short time according to the user's operation, which greatly improves the smoothness and may lag after closing</desc>
            <get>. ./kr-script/qualcomm/msm_booster_get.sh</get>
            <set>. ./kr-script/qualcomm/msm_booster_set.sh</set>
        </switch>
        <switch confirm="true" visible=". ./kr-script/qualcomm/msm_perfd_support.sh">
            <title>Perfd</title>
            <desc>The system increases the CPU frequency for a short time according to the user's operation, which greatly improves the smoothness and may lag after closing</desc>
            <get>. ./kr-script/qualcomm/msm_perfd_get.sh</get>
            <set>. ./kr-script/qualcomm/msm_perfd_set.sh</set>
        </switch>
    </group>

    <group title="dex2oat compilation">
        <action min-sdk="24" visible="getprop persist.vtools.ext_all">
            <title>Modify dex2oat thread count</title>
            <desc>Increasing the number of core threads (not exceeding the number of CPU cores) can improve the efficiency of app installation, but it can cause lag during app installation!</desc>
            <set>run dex2oat/threads_set.sh</set>
            <params>
                <param name="boot" title="At startup(boot-dex2oat-threads)"
                    options-sh="run thread_count_options.sh"
                    value-sh="getprop dalvik.vm.boot-dex2oat-threads" />
                <param name="dex2oat" title="At startup(dex2oat-threads)"
                    options-sh="run thread_count_options.sh"
                    value-sh="getprop dalvik.vm.dex2oat-threads" />
                <param name="image" title="Compile boot image(image-dex2oat-threads)"
                    options-sh="run thread_count_options.sh"
                    value-sh="getprop dalvik.vm.image-dex2oat-threads" />
                <param name="other" title="dex2oat_thread_count" readonly="readonly">
                    <option value="">Default</option>
                </param>
            </params>
        </action>

        <action visible=". ./kr-script/common/android_n.sh">
            <title>Perform dex2oat compilation</title>
            <desc>For Android N+, using Speed mode for dex2oat compilation</desc>
            <param name="app" value="1" title="App to compile" desc="If it is performed for the first time, it may take several minutes and will not be repeated for applications that have already been processed. This operation is disabled after a system update and the application update also needs to be processed~~">
                <option value=" ">All</option>
                <option value="-s">System only</option>
                <option value="-3">Third party only</option>
            </param>
            <param name="mode" value="speed" title="Compilation Mode" desc="If you don't understand the difference between Speed and Everything modes, then just leave this option as default">
                <option value="speed">Speed mode (recommended)</option>
                <option value="everything">Everything mode</option>
            </param>
            <set>run dex2oat/compile.sh</set>
        </action>
    </group>

    <group title="Disk IO">
        <action>
            <title>Perform FSTRIM</title>
            <desc>Normally the system will execute the</desc>
            <set>
                echo 'fstrim /data'; fstrim /data;
                echo 'fstrim /cache'; fstrim /cache;
                echo 'fstrim /system'; fstrim /system 2>/dev/null;
                sm fstrim 2>/dev/null
                echo 'Command executed';
            </set>
        </action>
        <action>
            <title>Write buffer</title>
            <desc>Adjusting the write buffer size</desc>
            <params>
                <param name="dirty_background_ratio" title="Write - minimum buffer size"
                    options-sh="run io/cache_ratio_options.sh"
                    value-sh="cat /proc/sys/vm/dirty_background_ratio" />
                <param name="dirty_ratio" title="Write - maximum buffer size"
                    options-sh="run io/cache_ratio_options.sh"
                    value-sh="cat /proc/sys/vm/dirty_ratio" />
                <param name="dirty_writeback_centisecs" title="Write - cache flush frequency (less than expiration time)"
                    options-sh="run io/write_time_options.sh"
                    value-sh="cat /proc/sys/vm/dirty_writeback_centisecs" />
                <param name="dirty_expire_centisecs" title="Write - cache expiration time"
                    options-sh="run io/write_time_options.sh"
                    value-sh="cat /proc/sys/vm/dirty_expire_centisecs" />

                <param name="read_ahead_kb" title="Read - buffer size"
                    options-sh="run io/read_cache_options.sh"
                    value-sh="cat /sys/block/sda/queue/read_ahead_kb" />
            </params>
            <set>run io/write_cache.sh</set>
        </action>
    </group>

    <group title="Other">
        <action
            id="performance_mem_clear"
            logo="file:///android_asset/kr-script/icons/shortcut_mem_clear.png"
            auto-off="true"
            auto-finish="true">
            <title>Clear RAM</title>
            <desc>Clear the contents of the cache in RAM, such as: cached processes, destroyed processes, read and write pre-reading</desc>
            <set>run drop_cache.sh</set>
        </action>

        <action confirm="true">
            <title>Clear dalvik-cache</title>
            <desc>Clearing the dalvik cache will immediately reboot the phone and take a lot of time to rebuild the cache on the next boot! This operation does not improve performance, so if you don't know what it is, don't click on it!</desc>
            <set>run drop-dalvik-cache.sh</set>
        </action>
    </group>
</items>